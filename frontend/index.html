<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trading Alerts Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; background:#0f1720; color:#e6eef8; padding:24px; }
    .card { max-width:900px; margin:18px auto; background:#0b1220; padding:20px; border-radius:10px; border:1px solid #24303a; }
    h1 { color:#00d084; margin:0 0 12px; }
    button { background:#00d084; border:none; color:#062024; padding:10px 16px; border-radius:8px; cursor:pointer; }
    .small { color:#99a7b3; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>ðŸ“ˆ Trading Alerts Dashboard</h1>
    <p class="small">Backend status: <span id="status">checking...</span></p>

    <div style="margin-top:16px;">
      <h3>Send a test alert</h3>
      <button id="sendTest">Send Test Alert</button>
      <p id="result" class="small"></p>
    </div>
  </div>

  <script>
    async function check() {
      try {
        const r = await fetch(window.location.origin + '/');
        const txt = await r.text();
        document.getElementById('status').innerText = txt.includes('Running') ? 'âœ… Online' : 'âŒ ' + (txt || 'no response');
      } catch(e) {
        document.getElementById('status').innerText = 'âŒ Offline';
      }
    }
    document.getElementById('sendTest').addEventListener('click', async () => {
      try {
        const r = await fetch(window.location.origin + '/alert', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ test: true, message: 'Test alert from dashboard' })});
        const j = await r.json();
        document.getElementById('result').innerText = 'Sent â€” server replied: ' + (j.message || JSON.stringify(j));
      } catch(err) {
        document.getElementById('result').innerText = 'Error sending: ' + err;
      }
    });
    check();
  </script>
</body>
</html>
